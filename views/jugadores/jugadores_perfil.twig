{% extends "layouts/main.twig" %}

{% set porcentaje = jugador.experiencia / jugador.getCantidadExperienciaNextLevel() * 100 %}
{% set medallas = jugador.getMedallas() %}
{% set personajes = jugador.getPersonajes() %}

{% block breadcrumb %}
<div class="bread">
    <ul class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/jugadores">Jugadores</a></li>
        <li>{{ jugador.displayName() }}</li>
    </ul>
</div>
{% endblock %}

{% block content %}
    <h1>
        {{ jugador.displayName() }}
        {% if usuario and jugador.id == usuario.id %}
            <a class="pull-right" href="/panel">Ver mi panel</a>
        {% endif %}
    </h1>
    <div class="caja-perfil caja-perfil-grande">
        <img class="img-thumbnail pull-left" src="{{ uploads("avatars/#{jugador.avatar}") }}" alt="">
        <div class="datos-perfil">
            <h3>{{ jugador.nickname }} <span class="nivel">Nv. {{ jugador.nivel }}</span> <span class="label label-sm bg-blue">{{ jugador.getTitulo() }}</span></h3>
            <div style="width: 90%">
                <div class="progress">
                    <div class="progress-bar progress-bar-success active progress-bar-striped" role="progressbar" aria-valuenow="40"
                         aria-valuemin="0" aria-valuemax="100" style="width:{{ porcentaje }}%">
                        {{ porcentaje|round }} % - ({{ jugador.experiencia }}/{{ jugador.getCantidadExperienciaNextLevel() }})
                    </div>
                </div>
            </div>
            <div class="extra">
                <p style="font-size: 13px;">{{ jugador.resumen }}</p>
            </div>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-5">
            <div class="caja-perfil">
                <div class="header"><h4>Medallas y reconocimientos</h4></div>
                <div class="relleno">
                    <div class="medallas">
                        {% if medallas | length == 0 %}
                            No hay medallas cargadas para este usuario
                        {% endif %}
                        {% for medalla in medallas %}
                            <div class="medalla">
                                <img class="medalla" src="{{ asset("images/medallas/#{medalla.icono}") }}" alt="">
                                <div class="overlay">
                                    <h3>{{ medalla.nombre }}</h3>
                                    <p>{{ medalla.descripcion }}</p>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-7">
            <div class="caja-perfil">
                <div class="header"><h4>Personajes y Partidas</h4></div>
                <div class="relleno">
                    <table class="table">
                        {%  if personajes | length > 0 %}
                            <thead>
                            <th colspan="5">Jugador con</th>
                            </thead>
                            <tbody>
                                {% for personaje in personajes %}
                                    {% set partida = personaje.getPartida() %}
                                    <tr>
                                        <td><a href="{{ url("/personajes/#{personaje.getUrlName()}") }}">{{ personaje.nombre }}</a></td>
                                        <td>{{ partida.nombre }}</td>
                                        <td>Nivel: {{ personaje.getNivel() }}</td>
                                        <td>{{ personaje.raza }}</td>
                                        <td>{{ personaje.getClasesInString() }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        {% endif %}
                        {% if jugador.getPartidas() | length > 0 %}
                            <thead>
                            <th colspan="5">Director de</th>
                            </thead>
                            <tbody>
                            {% for partida in jugador.getPartidas()  %}
                                <tr>
                                    <td colspan="5">{{ partida.nombre }}</td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        {% endif %}
                    </table>
                </div>
            </div>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-12">
            <div class="caja-perfil">
                <div class="header"><h4>Ãšltima actividad</h4></div>
                <div class="relleno">
                    <table></table>
                </div>
            </div>
        </div>
    </div>

{% endblock %}